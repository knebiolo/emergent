id,line,context,prev_line,match_line,next_line,risk,recommendation
1,84,_safe_build_kdtree,return None,except Exception:,"logger.exception('%s: unexpected error while building cKDTree; re-raising', name)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
2,99,_safe_build_kdtree,_HAS_NUMBA = True,except Exception:,numba = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
3,104,_safe_build_kdtree,logging.getLogger(__name__).warning('Numba import failed; falling back to pure-Python implementations'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
4,191,save,"logger.info(""Saved behavioral weights to %s"", filepath)",except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
5,194,save,logger.exception('Collision response failed; skipping collision handling for this timestep'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
6,207,load,logger.exception('Collision response failed; skipping collision handling for this timestep'),except Exception:,logger.exception('Unexpected error in collision response; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
7,625,,metrics['collision_count'] = 0,except Exception:,logger.exception('Unexpected error computing collision metrics; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
8,649,,metrics['shallow_count'] = shallow_count,except Exception:,metrics['dry_count'] = 0,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
9,708,,metrics['mean_upstream_velocity'] = float(np.mean(self.sim._upstream_vel_buf)),except Exception:,metrics['mean_upstream_velocity'] = 0.0,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
10,751,,"logger.info(""Starting RL training: %s episodes %s timesteps"", num_episodes, timesteps_per_episode)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
11,771,,"logger.info(""Episode %s: New best reward = %0.2f"", episode, episode_reward)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
12,793,,del self.sim._last_drag_reductions,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
13,796,,gc.collect(),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
14,804,,"logger.info(""Training complete. Best reward: %0.2f"", best_reward)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
15,841,visitor,shape = obj.shape,except Exception:,shape = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
16,962,infer_wetted_perimeter_from_hecras,"logger.warning(""[consolidation] central HECRAS helper ignores 'timestep' argument (requested %s); using first timestep"", timestep)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
17,1025,,"logger.warning(""No valid wetted cells for centerline extraction"")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
18,1039,,"logger.info(""Ridge cells (distance >= %0.2fm): %,d"", min_distance_threshold, len(ridge_coords))",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
19,1045,,"logger.warning(""Too few ridge cells for centerline extraction"")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
20,1091,,"logger.info(""Centerline extracted: %0.2fm long"", centerline.length)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
21,1097,,"logger.warning(""Centerline too short (%0.2fm < %sm)"", centerline.length, min_length)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
22,1108,extract_centerline_fast_hecras,from emergent.salmon_abm.hecras_helpers import extract_centerline_fast_hecras as _central,except Exception:,from .hecras_helpers import extract_centerline_fast_hecras as _central,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
23,1152,initialize_hecras_geometry,"logger.info(""%s"", ""=""*80)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
24,1158,,"logger.info(""1. Loading HECRAS plan and building KDTree..."")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
25,1173,,"logger.info(""Loaded %d HECRAS cells"", len(coords))",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
26,1179,,"logger.info(""2. Extracting centerline..."")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
27,1191,,"logger.warning(""Failed to extract centerline!"")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
28,1200,,"logger.info(""2b. Inferring wetted perimeter (vectorizing)..."")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
29,1209,,"logger.info(""Perimeter points: %d"", 0 if perimeter_points is None else len(perimeter_points))",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
30,1211,,pass,except Exception:,perimeter_points = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
31,1221,,"logger.info(""3. Creating regular grid rasters..."")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
32,1237,,"logger.info(""Grid dimensions: %d x %d at %0.2fm resolution"", height, width, cell_size)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
33,1246,,"logger.info(""4. Mapping HECRAS fields to rasters..."")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
34,1283,map_hecras_for_agents,from .hecras_helpers import map_hecras_for_agents as _central,except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
35,1286,map_hecras_for_agents,logger.exception('Failed to import hecras_helpers.map_hecras_for_agents'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
36,1300,ensure_hdf_coords_from_hecras,from .hecras_helpers import ensure_hdf_coords_from_hecras as _central,except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
37,1303,ensure_hdf_coords_from_hecras,logger.exception('Failed to import local hecras_helpers.ensure_hdf_coords_from_hecras'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
38,1328,ensure_hdf_coords_from_hecras,"needs_populate = not np.isfinite(existing).any() or np.allclose(existing, 0.0)",except Exception:,needs_populate = True,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
39,1351,map_hecras_to_env_rasters,from emergent.salmon_abm.hecras_helpers import map_hecras_to_env_rasters as _central,except Exception:,from .hecras_helpers import map_hecras_to_env_rasters as _central,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
40,1355,map_hecras_to_env_rasters,#                             hw.flush(),#                         except Exception:,#                             pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
41,1357,map_hecras_to_env_rasters,#                             pass,#                 except Exception:,#                     pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
42,1359,map_hecras_to_env_rasters,#                     pass,#     except Exception:,#         pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
43,1388,compute_affine_from_hecras,from scipy.spatial import cKDTree,except Exception:,# fallback to slower scipy.spatial.KDTree if cKDTree not available,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
44,1412,,AffineLocal = _Affine,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
45,1416,,AffineLocal = _Affine,except Exception:,# last resort: build a simple stand-in,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
46,1513,get_arr,return cp,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
47,1516,get_arr,"logger.info(""CuPy not found. Falling back to Numpy."")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
48,1553,geo_to_pixel,"return rows, cols",except Exception:,# Fallback to per-point multiplication,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
49,1581,get_inv_transform,key = id(transform),except Exception:,return ~transform,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
50,1591,get_inv_transform,inv = ~transform,except Exception:,# best-effort: return direct invertible object,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
51,1610,safe_flush,return,except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
52,1618,safe_flush,return,except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
53,1627,safe_flush,hw.flush(),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
54,1629,safe_flush,pass,except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
55,1631,safe_flush,pass,except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
56,1640,,_HAS_NUMBA = True,except Exception:,_HAS_NUMBA = False,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
57,2121,_time_to_fatigue_numba,"_ = _calc_battery_numba(dummy, dummy, dummy, np.ones(n, dtype=np.bool_), 0.1)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
58,2124,_time_to_fatigue_numba,logger.exception('Numba precompile at import time failed; continuing without warmed numba kernels'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
59,2144,_numba_warmup,"_ = _swim_core_numba(d, d, d, d, d, d, np.zeros(m, dtype=np.bool_), np.zeros(m, dtype=np.bool_), b, 0.1)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
60,2147,_numba_warmup,logger.exception('_numba_warmup failed; numba kernels may not be available'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
61,2153,_numba_warmup,_numba_warmup(),except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
62,2156,_numba_warmup,logger.exception('_numba_warmup() failed during module init; continuing without warmed kernels'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
63,2178,_numba_warmup_for_sim,"_compute_drags_numba(ones, ones, ones, ones, bmask, 1.0, ones, ones, ones, bi)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
64,2181,_numba_warmup_for_sim,logger.exception('Exact-shape numba warmup: _compute_drags_numba failed for sim-shaped arrays'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
65,2185,_numba_warmup_for_sim,"_swim_speeds_numba(ones, ones, ones, ones)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
66,2188,_numba_warmup_for_sim,logger.exception('Exact-shape numba warmup: _swim_speeds_numba failed for sim-shaped arrays'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
67,2194,_numba_warmup_for_sim,"_assess_fatigue_core(ones, ones, ones, ones, ones, ones, ones, buf)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
68,2197,_numba_warmup_for_sim,logger.exception('Exact-shape numba warmup: _assess_fatigue_core failed for sim-shaped arrays'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
69,2199,,pass,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
70,2202,,logger.exception('_numba_warmup_for_sim failed while preparing sim-shaped warmups'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
71,2455,,"t = getattr(simulation, 'vel_mag_rast_transform', None)",except Exception:,t = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
72,2516,,orow = int(orow[0]); ocol = int(ocol[0]),except Exception:,orow = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
73,2565,,safe_flush(hdf),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
74,2581,,hw.flush(),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
75,2584,,wrote = True,except Exception:,wrote = False,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
76,2658,_MiniSim,"t = getattr(simulation, 'vel_mag_rast_transform', None)",except Exception:,t = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
77,2711,,env[out_name][:] = upsampled.astype('f4'),except Exception:,del env[out_name],low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
78,2717,,hw.flush(),except Exception:,"# if writing to same file is not desired, just return the upsampled array",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
79,2726,,del hw2[tmp_name],except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
80,2793,output_excel,logger.info('exporting records to excel...'),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
81,2807,output_excel,"logger.info('records exported. check output excel file: %s', output_excel)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
82,2876,,"logger.info('Time Step %s complete', i)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
83,3081,__init__,self.interp_PID(),except Exception:,"# Default: P = 1.0 constant, I = 0, D = 0",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
84,3171,plane_model,"self.D_params, _ = curve_fit(plane_model, (length, velocity), D)",except Exception:,"# Fallback to constant gains: P=1, I=0, D=0",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
85,3590,,"logger.info('running individual %d of generation %d', i+1, generation+1)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
86,3600,,"logger.info('P: %0.3f, I: %0.3f, D: %0.3f', self.p[i], self.i[i], self.d[i])",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
87,3630,,"logger.exception('PID run failed for P=%0.3f I=%0.3f D=%0.3f: %s', self.p[i], self.i[i], self.d[i], e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
88,3660,,"logger.info('completed generation %d', generation+1)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
89,3753,,self._memmap_writer = None,except Exception:,self._log_writer = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
90,3796,,from .sockeye import PID_controller,except Exception:,# fallback: try absolute import path,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
91,3800,,from emergent.salmon_abm.sockeye import PID_controller,except Exception:,PID_controller = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
92,3810,,self.pid_controller.interp_PID(),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
93,3812,,pass,except Exception:,# silently ignore PID attach failures to avoid noisy logs,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
94,3925,,self._memmap_vars = vars_to_log,except Exception:,self._memmap_writer = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
95,3952,,self._env_cache[name] = np.asarray(env[name][:]),except Exception:,try:,medium,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
96,3955,,"logger.exception(""Failed to load environment raster '%s' into _env_cache"", name)",except Exception:,pass,medium,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
97,3958,,self._env_cache[name] = None,except Exception:,self._env_cache = {},medium,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
98,3967,,_numba_warmup(m=warm_n),except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
99,3970,,"logger.exception(""_numba_warmup failed during init warmup"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
100,3977,,_numba_warmup_for_sim(self),except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
101,3980,,"logger.exception(""_numba_warmup_for_sim failed during sim warmup"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
102,3991,,"create_on_init = getattr(self, 'create_alongstream_on_init', True)",except Exception:,factor = 4,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
103,4017,,"map_hecras_to_env_rasters(self, hecras_hdf, raster_names=['depth','wetted','vel_x','vel_y'])",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
104,4020,,"logger.exception(""map_hecras_to_env_rasters failed for %s, will try cached load"", hecras_hdf)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
105,4026,,"map_hecras_to_env_rasters(self, hecras_hdf, raster_names=['depth','wetted','vel_x','vel_y'])",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
106,4029,,"logger.exception(""load_hecras_plan_cached or second map_hecras_to_env_rasters attempt failed for %s"", hecras_hdf)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
107,4035,,"compute_coarsened_alongstream_raster(self, factor=factor, outlet_xy=None, depth_name='depth', wetted_name='wetted', out_name='along_stream_dist')",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
108,4038,,"logger.exception(""compute_coarsened_alongstream_raster failed, will try compute_alongstream_raster"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
109,4042,,"compute_alongstream_raster(self, outlet_xy=None, depth_name='depth', wetted_name='wetted', out_name='along_stream_dist')",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
110,4045,,"logger.exception(""compute_alongstream_raster also failed"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
111,4047,,pass,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
112,4050,,"logger.exception(""mapping external HDF failed, will try computing alongstream on current hdf5"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
113,4055,,"compute_coarsened_alongstream_raster(self, factor=factor)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
114,4058,,"logger.exception(""compute_coarsened_alongstream_raster fallback failed"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
115,4064,,"compute_coarsened_alongstream_raster(self, factor=factor)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
116,4067,,"logger.exception(""compute_coarsened_alongstream_raster failed when computing on in-project HDF"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
117,4069,,pass,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
118,4099,_maybe_import,"logger.info(""Importing %s from %s as %s"", key, path, surface_type)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
119,4104,_maybe_import,"logger.info(""Successfully imported %s"", key)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
120,4109,_maybe_import,"logger.warning(""Raster file not found: %s"", path)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
121,4133,,"logger.info(""%s"", ""=""*80)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
122,4156,,"logger.info(""Using HECRAS-derived centerline (%0.2fm)"", self.centerline.length)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
123,4167,,"logger.info(""HECRAS extent: X=[%0.2f, %0.2f], Y=[%0.2f, %0.2f]"", x_min, x_max, y_min, y_max)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
124,4186,,perim_timestep = 0,except Exception:,perim_timestep = 0,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
125,4192,,"perim_info = infer_wetted_perimeter_from_hecras(self.hecras_plan_path, depth_threshold=perim_depth, timestep=perim_timestep, verbose=False)",except Exception:,perim_info = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
126,4216,,"perim_info = {'perimeter_points': np.zeros((0,2)), 'perimeter_cells': np.zeros((0,), dtype=int), 'wetted_mask': None}",except Exception:,"perim_info = {'perimeter_points': np.zeros((0,2)), 'perimeter_cells': np.zeros((0,), dtype=int), 'wetted_mask': None}",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
127,4228,,from emergent.salmon_abm.tin_helpers import alpha_shape,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
128,4231,,from .tin_helpers import alpha_shape,except Exception:,alpha_shape = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
129,4242,,self.perimeter_polygon = mp.convex_hull,except Exception:,self.perimeter_polygon = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
130,4247,,"logger.info(""HECRAS perimeter: %d points; polygon=%s"", len(self.perimeter_points), 'yes' if self.perimeter_polygon is not None else 'no')",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
131,4257,,"logger.warning(""Failed to compute HECRAS perimeter: %s"", e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
132,4267,,"logger.exception(""HECRAS initialization failed due to IO/Key/Value error: %s"", e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
133,4276,,"logger.warning(""load_hecras_plan_cached failed; disabling HECRAS mode: %s"", e2)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
134,4281,,self.hecras_mapping_enabled = False,except Exception:,# Re-raise unexpected exceptions so we don't mask programming errors,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
135,4310,,env = self.hdf5.get('environment') if self.hdf5 is not None else None,except Exception:,env = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
136,4327,,y_coords = np.array(env['y_coords']),except Exception:,distance_to = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
137,4344,,y_coords = y_coords if y_coords is not None else np.array(env2['y_coords']),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
138,4357,,distance_to_rast = distance_transform_edt(mask) * pixel_width,except Exception:,distance_to_rast = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
139,4390,,target_affine = compute_affine_from_hecras(hecras_coords),except Exception:,target_affine = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
140,4392,,target_affine = None,except Exception:,target_affine = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
141,4400,,logger.info('Derived centerline from HECRAS rasters (skeletonized)'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
142,4415,,"logger.warning('Could not derive centerline from HECRAS: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
143,4469,,"logger.warning('HECRAS depth dataset missing or unreadable: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
144,4477,,"logger.warning('HECRAS velocity datasets missing or unreadable: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
145,4508,,"logger.warning(""Failed to initialize HECRAS environment: %s"", e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
146,4540,apply_behavioral_weights,"logger.info(""Applied behavioral weights (keys): %s"", keys)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
147,4542,apply_behavioral_weights,pass,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
148,4545,apply_behavioral_weights,logger.warning('Applied behavioral weights (some fields may be unavailable)'),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
149,4559,apply_behavioral_weights,"_compute_schooling_loop(dummy_pos, dummy_head, dummy_data, dummy_offsets, 1.0, 1.0, dummy_coh, dummy_align, 2)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
150,4562,apply_behavioral_weights,"logger.exception(""_compute_schooling_loop warmup failed"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
151,4567,,"_compute_drafting_loop(dummy_pos, dummy_head, dummy_data, dummy_offsets, 0.5, 0.1, 0.2, dummy_drag, 2)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
152,4570,,"logger.exception(""_compute_drafting_loop warmup failed"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
153,4572,,pass,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
154,4575,,"logger.exception(""apply_behavioral_weights: unexpected failure during numba warmup block"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
155,4634,,"self.heading = np.random.uniform(-np.pi, np.pi, size=self.num_agents)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
156,4648,,self.ideal_sog = self.sog.copy(),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
157,4661,,"self.y_vel = self.y_vel + vel_jitter[:, 1]",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
158,4676,,"setattr(bw, k, newv)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
159,4681,,self.apply_behavioral_weights(bw),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
160,4683,,pass,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
161,4739,,del self._kdtree_cache,except Exception:,self._kdtree_cache = {},high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
162,4741,,self._kdtree_cache = {},except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
163,4747,,del self._hecras_map,except Exception:,self._hecras_map = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
164,4749,,self._hecras_map = None,except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
165,4757,,"self.past_centerline_meas = np.full((self.num_agents, 1), np.nan)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
166,4763,,gc.collect(),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
167,4782,,"logger.info(""Spatial state reset complete. Behavioral weights preserved."")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
168,4922,,"agent_data.create_dataset(""time_of_jump"", (self.num_agents, self.num_timesteps), dtype='f4', chunks=chunk_shape)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
169,4925,,"logger.exception(""initialize_hdf5: failed while creating HDF5 datasets"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
170,4987,,"self._memmap_writer = MemmapLogWriter(out_dir, var_shapes, dtype=np.float32)",except Exception:,self._memmap_writer = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
171,4997,,"arrays_2d[k] = self._hdf5_buffers[k][:, :write_len].astype('f4')",except Exception:,"arrays_2d[k] = np.zeros((self.num_agents, write_len), dtype='f4')",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
172,5001,,"self._memmap_writer.append_block(t_start, arrays_2d)",except Exception:,# fallback to per-step append on failure,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
173,5008,,"self._memmap_writer.append(t_idx, arrays)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
174,5017,,"self._log_writer.append(t_idx, arrays)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
175,5025,,"self.hdf5[ds_name][:, t_start:t_end+1] = buf[:, :write_len]",except Exception:,for offset in range(write_len):,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
176,5067,,acc_arr.fill(0),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
177,5069,,pass,except Exception:,"# If memory group doesn't exist or write fails, skip silently",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
178,5117,_create_or_replace_dataset,"logger.exception(""Failed to open raster %s: %s"", data_dir, e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
179,5141,,"logger.info(""Creating x_coords and y_coords with dimensions: height=%s, width=%s, rows=%s, cols=%s"", height, width, src.shape[0], src.shape[1])",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
180,5157,,"logger.exception('Failed to create x_coords/y_coords datasets: %s', e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
181,5163,,"logger.info(""Created datasets with shape: %s"", dset_x.shape)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
182,5180,,"logger.exception('Failed writing x/y coords chunk starting at row %s: %s', i, e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
183,5190,,"logger.exception('Failed to flush HDF5 after writing x/y coords: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
184,5196,,"logger.info(""Successfully created x_coords and y_coords; flushed to disk. Shape: %s, first value: %s"", dset_x.shape, dset_x[0,0])",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
185,5201,,"logger.info(""x_coords already exists with shape: %s"", self.hdf5['x_coords'].shape)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
186,5414,,cols = (inds % xs.shape[1]).astype(int),except Exception:,logger.exception('Unexpected error during geo->pixel conversion; re-raising'),low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
187,5423,,return vals.reshape(self.X.shape),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
188,5430,,"dists = _wrap_project_points_onto_line_numba(xs_line, ys_line, px, py)",except Exception:,"dists = _project_points_onto_line_numpy(xs_line, ys_line, px, py)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
189,5446,boundary_surface,"logger.info(""Using HECRAS distance-to-bank (already computed)"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
190,5458,boundary_surface,"logger.warning(""No wetted raster found, skipping boundary_surface"")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
191,5465,boundary_surface,return,except Exception:,return,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
192,5471,boundary_surface,pixel_width = self.depth_rast_transform.a,except Exception:,pixel_width = 1.0,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
193,5498,,self.width = w,except Exception:,# cannot determine shape; skip writing,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
194,5560,,self.height = int(np.ceil(yrange / self.avoid_cell_size)) + 1,except Exception:,"base_transform = compute_affine_from_hecras(np.array([[0.0, 0.0]]), target_cell_size=self.avoid_cell_size)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
195,5615,,"base_t = compute_affine_from_hecras(np.array([[0.0, 0.0]]), target_cell_size=self.refugia_cell_size)",except Exception:,"base_t = compute_affine_from_hecras(np.array([[0.0, 0.0]]), target_cell_size=self.refugia_cell_size)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
196,5695,batch_sample_environment,"ensure_hdf_coords_from_hecras(self, self.hecras_plan_path, target_shape=target_shape, target_transform=target_transform)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
197,5703,batch_sample_environment,"map_hecras_to_env_rasters(self, self.hecras_plan_path, field_names=getattr(self, 'hecras_fields', None), k=getattr(self, 'hecras_k', 8))",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
198,5730,,break,except Exception:,mapped = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
199,5750,,"rows, cols = geo_to_pixel_from_inv(inv, self.X, self.Y)",except Exception:,"rows, cols = geo_to_pixel(self.X, self.Y, transforms[0])",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
200,6014,,prep_poly = prep(poly),except Exception:,prep_poly = None,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
201,6024,,"wet_arr[i] = 1.0 if prep_poly.contains(Point(float(xs[i]), float(ys[i]))) else 0.0",except Exception:,wet_arr[i] = 0.0,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
202,6032,,wet_arr[idxs] = mask.astype(float),except Exception:,# last-resort: per-point contains without prep,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
203,6038,,"wet_arr[i] = 1.0 if poly.contains(Point(float(xs[i]), float(ys[i]))) else 0.0",except Exception:,wet_arr[i] = 0.0,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
204,6043,,self.wet = wet_arr.reshape(self.X.shape),except Exception:,# fallback: do not change self.wet here,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
205,6046,,pass,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
206,6096,initial_swim_speed,"self.y_vel = vals.get('vel_y', np.zeros(self.num_agents))",except Exception:,self.x_vel = np.zeros(self.num_agents),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
207,6141,initial_heading,values - self.arr.radians(180)),except Exception:,"# Fallback: compute heading from vector velocity components (x_vel, y_vel)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
208,6145,initial_heading,"vals_deg = np.degrees(np.arctan2(self.y_vel, self.x_vel))",except Exception:,"vals_deg = np.zeros(self.num_agents, dtype=float)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
209,6213,update_refugia_map,max_col = sample_ds.shape[1] - 1,except Exception:,max_row = int(np.round(self.height / self.refugia_cell_size)),low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
210,6232,,"self.refugia_accumulator[ai, ri, ci] = cv[valid]",except Exception:,# Fallback to safe per-agent assignment if vectorized write fails,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
211,6239,,"self.refugia_accumulator[i, r, c] = float(cv[i])",except Exception:,continue,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
212,6313,,"self.nearest_neighbor_distance = np.full(self.num_agents, np.nan)",except Exception:,logger.exception('Unexpected error during neighbor init; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
213,6367,,"logger.exception('HECRAS mapping failed for node fields; disabling HECRAS mapping for this sim: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
214,6370,,self.use_hecras = False,except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
215,6373,,logger.exception('Unexpected error during HECRAS mapping  re-raising'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
216,6403,precompute_pixel_indices,"logger.exception(""precompute_pixel_indices: get_inv_transform or geo_to_pixel_from_inv failed for key=%s: %s"", key, e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
217,6406,precompute_pixel_indices,"rows, cols = geo_to_pixel(X, Y, transform)",except Exception:,try:,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
218,6409,precompute_pixel_indices,logger.exception('precompute_pixel_indices: unexpected error  re-raising'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
219,6483,,"self.y_vel += vel_jitter[:, 1]",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
220,6485,,pass,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
221,6521,,tree = None,except Exception:,logger.exception('Unexpected error building KDTree; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
222,6610,,"logger.warning(""Negative kcal detected!"")",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
223,7243,,"out = _wrap_drag_fun_numba(fx, fy, wx, wy, mask, float(density), surface_areas, drag_coeffs, self.simulation.wave_drag, self.simulation.swim_behav, out)",except Exception:,# fallback,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
224,7426,,logger.warning('nan in error'),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
225,7472,,"dxdy = _swim_core_numba(fv0x_a, fv0y_a, accx_a, accy_a, pidx_a, pidy_a, tired_a, dead_a, mask_a, float(dt))",except Exception:,"dxdy = _swim_core_numba(fv0x, fv0y, accx, accy, pidx, pidy, tired_mask, dead_mask, mask, dt)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
226,7531,,"logger.debug('JUMP DEBUG t=0: dxdy[:3]=%s', dxdy[:3])",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
227,7537,,logger.warning('Jump displacement unexpectedly large; check jump parameters'),except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
228,7551,__init__,"self.num_agents = int(getattr(simulation_object, 'num_agents', 0))",except Exception:,self.num_agents = 0,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
229,8174,,"logger.debug(""border_cue: %d agents too close, threshold=%s; sample forces (x,y): %s"", n_close, thr_repr, list(zip(sample_fx, sample_fy)))",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
230,8176,,pass,except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
231,8449,,"self.simulation.wave_drag = np.where(body_depths >= 3, 1, wave_drag_fun(body_depths))",except Exception:,"# Fallback: if CSV not available, assume no additional wave drag",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
232,8744,,"alignment_array[:, 1] = (1.0 - sog_weight) * alignment_array[:, 1] + sog_weight * weight * v_hat_vel_y * no_school",except Exception:,"# On any error, fall back to heading-only alignment",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
233,9243,,self.simulation.drag = drags_tmp,except Exception:,self.simulation.drag = np.ascontiguousarray(drags_tmp),low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
234,9245,,self.simulation.drag = np.ascontiguousarray(drags_tmp),except Exception:,"swim_speeds = np.linalg.norm(fish_velocities - water_velocities, axis=-1)",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
235,9285,bout_distance,"dist_travelled = _bout_distance_numba(prev_X, X, prev_Y, Y)",except Exception:,"dist_travelled = _bout_distance_numba(self.simulation.prev_X, self.simulation.X, self.simulation.prev_Y, self.simulation.Y)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
236,9321,time_to_fatigue,"ttf = _time_to_fatigue_numba(ss, m_pro, m_sprint, float(a_p), float(b_p), float(a_s), float(b_s))",except Exception:,"ttf = _time_to_fatigue_numba(swim_speeds, mask_dict['prolonged'].astype(bool), mask_dict['sprint'].astype(bool), a_p, b_p, a_s, b_s)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
237,9434,calc_battery,logger.exception('Numba merged battery kernel failed; falling back to pure-Python implementation'),except Exception:,logger.exception('Unexpected error in merged battery numba kernel; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
238,9529,PID_checks,"logger.info('swim mode: %s', self.swim_mode[0])",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
239,9535,PID_checks,"logger.warning('Error no longer counts, fatigued')",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
240,9575,assess_fatigue,self.simulation.drag = drags_out,except Exception:,try:,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
241,9578,assess_fatigue,self.simulation.drag = np.ascontiguousarray(drags_out),except Exception:,logger.exception('Failed to set simulation.drag from numba kernel output'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
242,9580,,logger.exception('Failed to set simulation.drag from numba kernel output'),except Exception:,"# If the numba path fails entirely, log and fallback to Python implementation",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
243,9623,,self.simulation.battery = new_batt,except Exception:,self.simulation.drag = np.ascontiguousarray(new_drags),low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
244,9630,,"self.calc_battery(per_rec, ttf,  mask_dict)",except Exception:,logger.exception('Unexpected error in _drag_and_battery_numba; re-raising'),high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
245,9667,timestep,self.precompute_pixel_indices(),except Exception:,"# If precompute fails, do not block timestep (fallback to on-demand geo_to_pixel)",high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
246,9671,timestep,"logger.exception(""precompute_pixel_indices failed during timestep; falling back to on-demand geo_to_pixel"")",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
247,9798,,"self.y_vel += impulse[:, 1] * dt_safe",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
248,9851,,"logger.exception('ERROR resampling HECRAS data: %s', e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
249,9861,,stage_times['total_timestep'] = time.time() - t_start,except Exception:,stage_times['total_timestep'] = 0.0,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
250,9866,,"os.makedirs(out_dir, exist_ok=True)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
251,9874,,f.write('\n'),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
252,9940,run,cmap='viridis'),except Exception:,background = None,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
253,9955,,"plt.pause(max(0.001, float(dt)))",except Exception:,"time.sleep(max(0.001, float(dt)))",low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
254,9959,,"logger.info('Time Step %s complete', i)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
255,9966,,self.hdf5.close(),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
256,9975,,"logger.info('Time Step %s complete', i)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
257,10077,,"logger.info('Time Step %s complete', i)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
258,10094,,"logger.info('Time Step %s complete', i)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
259,10100,,self.hdf5.close(),except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
260,10107,,"logger.info('ABM took %s to compile', (t1-t0))",except Exception:,pass,medium,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
261,10324,plot_lengths,"logger.exception('Error in calculating histogram for %s: %s', sex_label, e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
262,10337,,"logger.warning('No length values found for %s.', sex_label)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
263,10416,,"logger.exception('Error in calculating histogram for %s: %s', sex_label, e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
264,10422,,"logger.warning('No weight values found for %s in %s.', sex_label, base_name)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
265,10502,,"logger.exception('Error in calculating histogram for %s: %s', sex_label, e)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
266,10508,,"logger.warning('No body depth values found for %s in %s.', sex_label, base_name)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
267,10700,,"logger.exception('Failed to process %s: %s', hdf_path, e)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
268,10729,,"logger.info('Kcal histograms saved to %s and %s', male_histogram_path, female_histogram_path)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
269,10979,,"logger.info('file %s timestep %s complete', filename, timestep)",except Exception:,pass,high,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
270,11013,,"logger.info('Dual band raster %s created successfully.', output_file)",except Exception:,pass,low,"Replace broad except with specific exceptions (e.g., ValueError, TypeError, IndexError, OSError) and use logger.exception; re-raise unexpected errors."
